--- ./grbl/serial.h	2017-01-31 17:46:20.000000000 -0800
+++ ./grbl/serial.h	2017-07-10 07:48:42.350534914 -0700
@@ -22,21 +22,8 @@
 #ifndef serial_h
 #define serial_h
 
-
-#ifndef RX_BUFFER_SIZE
-  #define RX_BUFFER_SIZE 128
-#endif
-#ifndef TX_BUFFER_SIZE
-  #ifdef USE_LINE_NUMBERS
-    #define TX_BUFFER_SIZE 112
-  #else
-    #define TX_BUFFER_SIZE 104
-  #endif
-#endif
-
 #define SERIAL_NO_DATA 0xff
 
-
 void serial_init();
 
 // Writes one byte to the TX serial buffer. Called by main program.
@@ -49,14 +36,16 @@
 void serial_reset_read_buffer();
 
 // Returns the number of bytes available in the RX serial buffer.
-uint8_t serial_get_rx_buffer_available();
+int serial_get_rx_buffer_available();
 
 // Returns the number of bytes used in the RX serial buffer.
 // NOTE: Deprecated. Not used unless classic status reports are enabled in config.h.
-uint8_t serial_get_rx_buffer_count();
+int serial_get_rx_buffer_count();
 
 // Returns the number of bytes used in the TX serial buffer.
 // NOTE: Not used except for debugging and ensuring no TX bottlenecks.
-uint8_t serial_get_tx_buffer_count();
+int serial_get_tx_buffer_count();
+
+int serial_rx_hook(uint8_t data);
 
 #endif
